<app-navbar style="width: 100%" class="mat-elevation-z6"></app-navbar>


<app-dataset-top-bar
  style="width: 100%; display: flex; justify-content: center; align-items: center; border-bottom: 1px solid rgba(0, 0, 0, 0.12);"
  >
</app-dataset-top-bar>


<main *ngIf="(gplGraph$ | async) as gplData else loader" class="app-two-column-grid">
<!--<main class="app-two-column-grid">-->
  <div style="gap: 35px;" class="v-flex">
    <app-dataset-filter-bar></app-dataset-filter-bar>
    <app-dataset-network-graph></app-dataset-network-graph>
  </div>
  <div style="gap: 30px;" class="v-flex">

    <div *ngIf="(selectedNode$ | async) as selectedNode" style="display: flex;align-items: flex-start; flex-direction: column;gap:9px;padding-bottom: 35px"
         class="as-card with-padding">
      <div class="badge-node">NODE</div>
      <p class="title title_1">{{selectedNode.id}}</p>
      <p class="subtitle subtitle_1 text-light-green">{{selectedNode.group}} - {{networkName$ | async}}</p>
    </div>

    {{tableData$ | async}}

    <div *ngIf="(selectedNode$ | async) as selectedNode" class="v-flex align-flex-start as-card" style="overflow: hidden">

      <div class="h-flex space-between align-center"
           style="width: 100%;height: 68px;padding: 0 16px; border-bottom: 1px solid rgba(0,0,0,.12)">
        <p class="title title_2">Similar Datasets</p>
      </div>

      <table mat-table multiTemplateDataRows id="neighbors" [dataSource]="dummyData"
             style="width: 100%">

        <!--- Note that these columns can be defined in any order.
              The actual rendered columns are set as a property on the row definition" -->
        <!-- Name Column -->
<!--        <ng-container matColumnDef="node_in_graph">-->
<!--          <th mat-header-cell *matHeaderCellDef></th>-->
<!--          <td mat-cell *matCellDef="let element; let index = dataIndex ;">-->
<!--            &lt;!&ndash;                <div *ngIf="index < nodesInGraph" class="in_graph_indicator"></div>&ndash;&gt;-->
<!--            <div class="in_graph_indicator"></div>-->
<!--          </td>-->
<!--        </ng-container>-->

        <ng-container matColumnDef="dataset_name">
          <th mat-header-cell *matHeaderCellDef> Name</th>
          <!--    <td mat-cell *matCellDef="let element"> {{element.node}} - {{element.to}}</td>-->
          <td mat-cell *matCellDef="let element">
            {{element.to}}
          </td>
        </ng-container>

        <!-- Symbol Column -->
        <ng-container matColumnDef="dataset_qvalue">
          <th mat-header-cell *matHeaderCellDef>qvalue</th>
          <td mat-cell *matCellDef="let element">{{element.value}}</td>
        </ng-container>

        <tr mat-header-row
            *matHeaderRowDef="['dataset_name','dataset_qvalue'];sticky:true"></tr>
        <tr mat-row *matRowDef="let row; columns: ['dataset_name','dataset_qvalue'];"></tr>
        <!--          <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>-->

        <!--       Row shown when there is no matching data.-->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No data matching the filter</td>
        </tr>
      </table>


    </div>

    <div *ngIf="(selectedEdge$ | async) as selectedEdge" style="display: flex;align-items: flex-start; flex-direction: column;gap:9px;padding-bottom: 21px"
         class="as-card with-padding">
      <div class="badge-edge">EDGE</div>

      <div style="display: flex;gap:6px;">

        <div class="v-flex" style="gap:9px;">
          <p class="title title_1">{{selectedEdge.from?.id}}</p>
          <p class="subtitle subtitle_1 text-light-green" style="max-width: 150px">{{selectedEdge.from?.group}}</p>
        </div>


        <div><p class="title title_1">-</p></div>

        <div class="v-flex" style="gap:9px;">
          <p class="title title_1">{{selectedEdge.to?.id}}</p>
          <p class="subtitle subtitle_1 text-light-green" style="max-width: 150px">{{selectedEdge.to?.group}} </p>
        </div>

      </div>
    </div>

    <div *ngIf="!(isEdgeNodeSelected$ | async)" style="padding: 0 17px" class="as-card">
      <div class="hint-with-badges" style="height: 56px">
        <p class="text">Select a</p>
        <div class="badge-node">NODE</div>
        <p class="text">or an</p>
        <div class="badge-edge">EDGE</div>
        <p class="text">from the network graph</p>
      </div>
    </div>

    <div *ngIf="!(isEdgeNodeSelected$ | async)" class="as-card with-padding">
      <p class="title title_2">Graph Legend</p>

      <div class="legend_list">
        <div class="legend_list_item" *ngFor="let item of gplData.categories">
          <div></div>
          <p>{{item.name}}</p>
        </div>

      </div>

    </div>
  </div>
</main>


<ng-template #loader>
  loading....
</ng-template>
